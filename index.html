<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XIAOSTUDIO | Coming Soon</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22black%22/><text y=%22.9em%22 x=%2250%%22 text-anchor=%22middle%22 font-family=%22Inter, sans-serif%22 font-weight=%22200%22 font-size=%2280%22 fill=%22white%22>X</text></svg>">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400&family=JetBrains+Mono:wght@100&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; 
            color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
            cursor: none; 
            transition: background-color 1s cubic-bezier(0.19, 1, 0.22, 1);
        }

        body.invert-mode {
            background-color: #e5e5e5;
            color: #1a1a1a;
        }

        /* 負片切換按鈕 */
        .mode-toggle {
            position: fixed;
            bottom: 40px;
            right: 40px;
            z-index: 100;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            letter-spacing: 0.2em;
            padding: 10px 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: rgba(255, 255, 255, 0.4);
            cursor: pointer;
            pointer-events: auto;
            transition: all 0.5s ease;
        }

        .mode-toggle:hover {
            background: white;
            color: black;
            border-color: white;
        }

        body.invert-mode .mode-toggle {
            border-color: rgba(0, 0, 0, 0.2);
            color: rgba(0, 0, 0, 0.4);
        }

        body.invert-mode .mode-toggle:hover {
            background: black;
            color: white;
            border-color: black;
        }

        /* Brand Typography Animations */
        @keyframes revealBrand {
            0% { filter: blur(20px); letter-spacing: 2em; opacity: 0; }
            100% { filter: blur(0px); letter-spacing: 0.8em; opacity: 1; }
        }

        @keyframes revealText {
            0% { filter: blur(10px); opacity: 0; }
            100% { filter: blur(0px); opacity: 0.8; }
        }

        .brand-header {
            font-weight: 200;
            text-indent: 0.8em; 
            animation: revealBrand 3s cubic-bezier(0.19, 1, 0.22, 1) forwards;
            white-space: nowrap;
            pointer-events: none;
            z-index: 40; 
        }

        .status-text {
            animation: revealText 4s cubic-bezier(0.19, 1, 0.22, 1) forwards 1s;
            opacity: 0;
            letter-spacing: 0.5em; 
            color: inherit;
            z-index: 40;
        }

        .service-item {
            animation: revealText 5s cubic-bezier(0.19, 1, 0.22, 1) forwards 1.5s;
            opacity: 0;
            letter-spacing: 0.2em;
            font-weight: 200;
            z-index: 40;
        }

        .grain-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0.03;
            background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)"/></svg>');
        }

        #canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 20; 
        }

        /* Quantum Data Panel */
        .quantum-data {
            position: fixed;
            top: 40px;
            left: 40px;
            z-index: 60;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.4);
            letter-spacing: 0.1em;
            pointer-events: none;
            line-height: 2;
            transition: color 1s ease;
        }

        body.invert-mode .quantum-data {
            color: rgba(0, 0, 0, 0.4);
        }

        @media (max-width: 640px) {
            .brand-header { letter-spacing: 0.4em !important; text-indent: 0.4em; font-size: 2.25rem; } 
            .status-text { letter-spacing: 0.3em; }
            .service-item { letter-spacing: 0.1em; font-size: 10px; }
            .quantum-data { top: 20px; left: 20px; font-size: 8px; }
            .mode-toggle { bottom: 20px; right: 20px; font-size: 8px; }
        }
    </style>
</head>
<body id="body">

    <div class="grain-overlay"></div>
    
    <!-- Data Display Layer -->
    <div class="quantum-data">
        <div>PARTICLE_ID: 0x9F_STU</div>
        <div id="data-pos">POS: [0.00, 0.00]</div>
        <div id="data-mom">MOM: 0.000 kg·m/s</div>
        <div id="data-prob">Ψ_PROB: 0.00%</div>
        <div id="data-fluc">FLUCTUATION: 0.00</div>
        <div id="data-uncert">ΔxΔp ≥ ℏ/2</div>
    </div>

    <canvas id="canvas"></canvas>

    <button id="mode-btn" class="mode-toggle uppercase">Invert View</button>

    <main class="flex flex-col items-center px-10 relative z-30 pointer-events-none">
        <header class="mb-12">
            <h1 class="brand-header text-4xl md:text-6xl uppercase">
                XIAOSTUDIO
            </h1>
        </header>

        <section class="flex flex-col items-center text-center">
            <div class="flex flex-wrap justify-center gap-x-6 gap-y-2 mb-12 max-w-3xl">
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">Visual Design</span>
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">•</span>
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">Motion Graphics</span>
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">•</span>
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">Graphic Design</span>
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">•</span>
                <span class="service-item text-[11px] md:text-[13px] opacity-60 uppercase">Product Cinematography</span>
            </div>

            <p class="status-text text-[20px] md:text-2xl font-light uppercase leading-[2.5] mb-8">
                Refining the digital experience
            </p>
            <p class="status-text text-[16px] md:text-lg font-normal opacity-60 uppercase">
                Est. 2026 — Launching soon
            </p>
        </section>

        <footer class="fixed bottom-10 left-0 w-full text-center z-40">
            <div class="flex flex-col space-y-3">
                <a href="mailto:jewuenxiao@gmail.com" class="pointer-events-auto text-[10px] md:text-[12px] tracking-[0.4em] opacity-40 hover:opacity-100 transition-all duration-1000 uppercase">jewuenxiao@gmail.com</a>
                <a href="https://xiaostudio.xyz" class="pointer-events-auto text-[11px] md:text-[13px] tracking-[0.6em] opacity-40 hover:opacity-100 transition-all duration-1000 uppercase">www.xiaostudio.xyz</a>
            </div>
        </footer>
    </main>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const body = document.getElementById('body');
        const modeBtn = document.getElementById('mode-btn');
        
        // Data Panel DOM
        const elPos = document.getElementById('data-pos');
        const elMom = document.getElementById('data-mom');
        const elProb = document.getElementById('data-prob');
        const elFluc = document.getElementById('data-fluc');

        let isInverted = false;

        let ball = {
            x: 0,
            y: 0,
            vx: 0,
            vy: 0,
            speed: 5.5,
            size: 2.5
        };

        let mouse = {
            x: window.innerWidth / 2,
            y: window.innerHeight / 2
        };

        let virtualCenter = {
            x: window.innerWidth / 2,
            y: window.innerHeight / 2,
            offsetX: 0,
            offsetY: 0
        };

        let quantumStates = [
            { x: 0, y: 0, vx: 0, vy: 0 },
            { x: 0, y: 0, vx: 0, vy: 0 },
            { x: 0, y: 0, vx: 0, vy: 0 }
        ];

        let trails = []; 
        let time = 0;

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resize);

        // 負片效果切換
        modeBtn.addEventListener('click', () => {
            isInverted = !isInverted;
            body.classList.toggle('invert-mode');
            modeBtn.innerText = isInverted ? 'Normal View' : 'Invert View';
        });

        function handleMove(clientX, clientY) { 
            mouse.x = clientX;
            mouse.y = clientY;
        }

        window.addEventListener('mousemove', e => handleMove(e.clientX, e.clientY));
        window.addEventListener('touchmove', e => {
            handleMove(e.touches[0].clientX, e.touches[0].clientY);
            e.preventDefault();
        }, { passive: false });

        function init() {
            resize();
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            const angle = Math.random() * Math.PI * 2;
            ball.vx = Math.cos(angle) * ball.speed;
            ball.vy = Math.sin(angle) * ball.speed;
            
            quantumStates.forEach(s => {
                s.x = ball.x;
                s.y = ball.y;
                s.vx = ball.vx;
                s.vy = ball.vy;
            });

            animate();
        }

        function updateData() {
            elPos.innerText = `POS: [${ball.x.toFixed(2)}, ${ball.y.toFixed(2)}]`;
            const momentum = Math.sqrt(ball.vx ** 2 + ball.vy ** 2).toFixed(3);
            elMom.innerText = `MOM: ${momentum} kg·m/s`;
            
            const dist = Math.sqrt((mouse.x - ball.x)**2 + (mouse.y - ball.y)**2);
            const prob = Math.max(0, 100 - (dist / 10)).toFixed(2);
            elProb.innerText = `Ψ_PROB: ${prob}%`;

            const fluctuation = Math.sqrt(virtualCenter.offsetX**2 + virtualCenter.offsetY**2).toFixed(2);
            elFluc.innerText = `FLUCTUATION: ${fluctuation}`;
        }

        function animate() {
            time += 0.05;

            // 清除背景 (根據模式切換顏色)
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = isInverted ? '#e5e5e5' : '#1a1a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 更新虛擬中心
            virtualCenter.offsetX = Math.sin(time * 0.7) * 40 + (Math.random() - 0.5) * 60;
            virtualCenter.offsetY = Math.cos(time * 0.8) * 40 + (Math.random() - 0.5) * 60;
            virtualCenter.x = mouse.x + virtualCenter.offsetX;
            virtualCenter.y = mouse.y + virtualCenter.offsetY;

            const dx = virtualCenter.x - ball.x;
            const dy = virtualCenter.y - ball.y;
            const targetAngle = Math.atan2(dy, dx);
            const currentAngle = Math.atan2(ball.vy, ball.vx);
            
            let diff = targetAngle - currentAngle;
            while (diff < -Math.PI) diff += Math.PI * 2;
            while (diff > Math.PI) diff -= Math.PI * 2;
            
            const turnSpeed = 0.04;
            const newAngle = currentAngle + diff * turnSpeed;
            ball.vx = Math.cos(newAngle) * ball.speed;
            ball.vy = Math.sin(newAngle) * ball.speed;

            ball.x += ball.vx;
            ball.y += ball.vy;

            const bounce = (b) => {
                if (b.x < b.size || b.x > canvas.width - b.size) {
                    b.vx *= -1;
                    b.x = b.x < b.size ? b.size : canvas.width - b.size;
                    return true;
                }
                if (b.y < b.size || b.y > canvas.height - b.size) {
                    b.vy *= -1;
                    b.y = b.y < b.size ? b.size : canvas.height - b.size;
                    return true;
                }
                return false;
            };

            const collided = bounce(ball);

            quantumStates.forEach((s, i) => {
                if (collided) {
                    s.x = ball.x;
                    s.y = ball.y;
                    s.vx = ball.vx;
                    s.vy = ball.vy;
                }
                const drift = (i + 1) * 0.15;
                s.vx += (Math.random() - 0.5) * drift;
                s.vy += (Math.random() - 0.5) * drift;
                s.x += s.vx;
                s.y += s.vy;
                bounce(s);
            });

            trails.push({ x: ball.x, y: ball.y, life: 1, states: JSON.parse(JSON.stringify(quantumStates)) });

            // 繪製軌跡 (核心：根據 isInverted 變換軌跡顏色)
            // 在負片模式下使用深灰色/黑色軌跡，在普通模式下使用白色軌跡
            const strokeBaseColor = isInverted ? '0, 0, 0' : '255, 255, 255';
            
            if (trails.length > 1) {
                for (let i = 1; i < trails.length; i++) {
                    const t1 = trails[i - 1];
                    const t2 = trails[i];
                    
                    ctx.beginPath();
                    ctx.strokeStyle = `rgba(${strokeBaseColor}, ${t2.life * 0.4})`;
                    ctx.lineWidth = ball.size * 2 * (0.4 + t2.life * 0.6);
                    ctx.moveTo(t1.x, t1.y);
                    ctx.lineTo(t2.x, t2.y);
                    ctx.stroke();

                    t2.states.forEach((s2, idx) => {
                        const s1 = t1.states[idx];
                        ctx.beginPath();
                        ctx.strokeStyle = `rgba(${strokeBaseColor}, ${t2.life * 0.15})`;
                        ctx.lineWidth = ball.size * 0.5;
                        ctx.moveTo(s1.x, s1.y);
                        ctx.lineTo(s2.x, s2.y);
                        ctx.stroke();
                    });
                    
                    trails[i].life -= 0.003; 
                }
            }

            while (trails.length > 0 && trails[0].life <= 0) {
                trails.shift();
            }

            // 繪製核心粒子
            ctx.fillStyle = isInverted ? '#000000' : '#ffffff';
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, 1.2, 0, Math.PI * 2);
            ctx.fill();

            updateData();
            requestAnimationFrame(animate);
        }
        window.onload = init;
    </script>
</body>
</html>
